@model ProjectViewDto
@{
    ViewData["Title"] = "Activate";
    //string _checked = Model.Project.Status == ProjectStatusEnum.Active ? "checked='checked'" : "";
    string statusLabel = string.Empty;
    ProjectStatusEnum newStatus = Model.Project.Status; ;
    switch (Model.Project.Status)
    {
        case ProjectStatusEnum.Planning: statusLabel = "Aktif Et"; newStatus = ProjectStatusEnum.Active; break;
        case ProjectStatusEnum.Active: statusLabel = "Kapat"; newStatus = ProjectStatusEnum.Closed; break;
        case ProjectStatusEnum.Closed: statusLabel = "Arşivle"; newStatus = ProjectStatusEnum.Archived; break;
        //case ProjectStatusEnum.Archived: statusLabel = "Sil"; newStatus = ProjectStatusEnum.Deleted; break;
    }
}

<div class="row g-6 g-xl-9">
    <div class="col-lg-6 col-xxl-4">
        <div class="card">
            <div class="card-body">
                <h2 class="fs-2 fw-bold my-2">Proje Sahibi</h2>
                <hr class="border-1" />
                <div class="fs-4 fw-bolder text-dark">Proje Adı</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.ProjectName</p>
                <div class="fs-4 fw-bolder text-dark">Firma Adı</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.CurrentAccount?.CompanyName</p>
                <div class="fs-4 fw-bolder text-dark">Yetkili Adı</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.CurrentAccount?.AuthorizedPerson</p>
                <div class="fs-4 fw-bolder text-dark">Adres</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.CurrentAccount?.Address</p>
                <div class="fs-4 fw-bolder text-dark">Telefon</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.CurrentAccount?.Phone1 - @Model.Project.CurrentAccount?.Phone2</p>
                <div class="fs-4 fw-bolder text-dark">Eposta</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.CurrentAccount?.Email</p>
            </div>
        </div>
    </div> <!--Proje Sahibi-->
    <div class="col-lg-6 col-xxl-4">
        <div class="card">
            <div class="card-body">
                <h2 class="fs-2 fw-bold my-2">Arazi Bilgileri</h2>
                <hr class="border-1" />
                <div class="row">
                    <div class="col-md-4">
                        <div class="fs-4 fw-bolder text-dark">Pafta</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.Pafta</p>
                    </div>
                    <div class="col-md-4">
                        <div class="fs-4 fw-bolder text-dark">Ada</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.Ada</p>
                    </div>
                    <div class="col-md-4">
                        <div class="fs-4 fw-bolder text-dark">Parsel</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.Parsel</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="fs-4 fw-bolder text-dark">Ülke</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.CurrentAccount?.Country?.Name</p>
                    </div>
                    <div class="col-md-4">
                        <div class="fs-4 fw-bolder text-dark">Şehir</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.CurrentAccount?.City?.Name</p>
                    </div>
                    <div class="col-md-4">
                        <div class="fs-4 fw-bolder text-dark">İlçe</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.CurrentAccount?.Town?.Name</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="card mt-5">
            <div class="card-body">
                <h2 class="fs-2 fw-bold my-2">Proje Kapsamı</h2>
                <hr class="border-1" />
                <div class="row">
                    <div class="col-md-4">
                        <div class="fs-4 fw-bolder text-dark">Blok Sayısı</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.BlockCount</p>
                    </div>
                    <div class="col-md-4">
                        <div class="fs-4 fw-bolder text-dark">Konut Sayısı</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.TotalApartmentCount</p>
                    </div>
                    <div class="col-md-4">
                        <div class="fs-4 fw-bolder text-dark">Ticari Sayısı</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.TotalCommercialCount</p>
                    </div>
                </div>
            </div>
        </div>

    </div> <!--Arazi Bilgileri-->
    <div class="col-lg-6 col-xxl-4">
        <div class="card">
            <div class="card-body">
                <h2 class="fs-2 fw-bold my-2">Proje Alt Bilgiler</h2>
                <hr class="border-1" />
                <div class="fs-4 fw-bolder text-dark">Mimari işler</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.ArchitecturalWorks</p>
                <div class="fs-4 fw-bolder text-dark">Statik işler</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.StaticWorks</p>
                <div class="fs-4 fw-bolder text-dark">Mekanik işler</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.MechanicalWorks</p>
                <div class="fs-4 fw-bolder text-dark">Elektrik işleri</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.ElectricalWorks</p>
                <div class="fs-4 fw-bolder text-dark">Peyzaj</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.LandScapeWorks</p>
            </div>
        </div>
    </div> <!--Proje Alt Bilgileri-->
</div>

<div class="row g-6 g-xl-9 my-2">
    <div class="col-lg-6 col-xxl-4">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h2 class="fs-2 fw-bold my-2">Proje Detayları</h2>
                        <hr class="border-1" />
                        <div class="fs-4 fw-bolder text-dark">İş Alım Tarihi</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.EmploymentDate.ToString("d")</p>
                        <div class="fs-4 fw-bolder text-dark">Taahhüt Tarihi</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.CommitmentDate.ToString("d")</p>
                        <div class="fs-4 fw-bolder text-dark">Lisans Tarihi</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.LicenseDate.ToString("d")</p>
                        <div class="fs-4 fw-bolder text-dark">Lisans No</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.LicenseNumber</p>
                        <div class="fs-4 fw-bolder text-dark">Yapı Denetim</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.BuildingInspection</p>
                    </div>
                </div>
            </div> <!--Proje Detay bilgileri-->
            <div class="col-12 mt-5">
                <div class="card">
                    <div class="card-body">
                        <h2 class="fs-2 fw-bold my-2">Proje Blokları</h2>
                        <hr class="border-1" />
                        @if (Model.Blocks?.Count() > 0)
                        {
                            <div class="row">
                                @foreach (var item in Model.Blocks)
                                {
                                    <div class="col-6 col-sm-6">
                                        <p>@item.Name</p>
                                    </div>
                                }
                            </div>
                        }
                    </div>
                </div>
            </div> <!--Proje Blokları-->
        </div>
    </div> <!--Proje Detayları-->
    <div class="col-lg-6 col-xxl-4">
        <div class="card">
            <div class="card-body">
                <h2 class="fs-2 fw-bold my-2">Mali Bilgiler</h2>
                <hr class="border-1" />
                <div class="fs-4 fw-bolder text-dark">Taahhüt tutarı</div>
                <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.CommitmentAmount.ToString("n")</p>
                <div class="row">
                    <div class="col-md-6">
                        <div class="fs-4 fw-bolder text-dark">Peşinat oranı</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.DownPaymentRate</p>
                    </div>
                    <div class="col-md-6">
                        <div class="fs-4 fw-bolder text-dark">Taksit sayısı</div>
                        <p class="text-gray-400 fw-bold fs-6 mt-1 mb-5">@Model.Project.InstallmentCount</p>
                    </div>
                </div>
                <hr class="border-1" />
                <table class="table align-middle table-row-dashed table-striped table-sm fs-6 gy-1 w-100">
                    <thead>
                        <tr class="text-start fw-bolder fs-5 text-uppercase gs-0 bg-light-dark">
                            <th>Taksit No</th>
                            <th>Taksit Tarihi</th>
                            <th>Taksit Tutarı</th>
                        </tr>
                    </thead>
                    <tbody class="fw-bold text-gray-600">
                        @if (Model.CurrentAccountDetail?.Count() > 0)
                        {
                            foreach (var item in Model.CurrentAccountDetail)
                            {
                                if (item.ProjectInstallmentNo != null)
                                {
                                    <tr>
                                        <td>@item.ProjectInstallmentNo</td>
                                        <td>@item.CurDate.ToString("d")</td>
                                        <td>@item.Debit.ToString("n")</td>
                                    </tr>
                                }
                            }
                        }

                    </tbody>
                </table>
            </div>
        </div>
    </div> <!--Mali Bilgiler-->
    <div class="col-lg-6 col-xxl-4">
        <div class="card">
            <div class="card-body">
                <h2 class="fs-2 fw-bold my-2">Proje Dosyaları</h2>
                <hr class="border-1" />
                <div class="row">
                    @*Listing the files *@
                    @foreach (FileModel file in Model.FileListModel)
                    {
                        <div class="col-6 col-sm-6">
                            <!--begin::Card-->
                            <div class="card">
                                <!--begin::Card body-->
                                <div class="card-body d-flex justify-content-center text-center flex-column p-8">
                                    <!--begin::Name-->
                                    <a href="@Model.URL@file.FileName" class="text-gray-800 text-hover-primary d-flex flex-column">
                                        <!--begin::Image-->
                                        <div class="symbol symbol-40px mb-3">
                                            <img src="/assets/media/svg/files/pdf.svg" alt="@file.FileName">
                                        </div>
                                        <!--end::Image-->
                                        <!--begin::FileName-->
                                        <div class="fs-7 fw-bolder mb-2">@file.FileName</div>
                                        <!--end::FileName-->
                                    </a>
                                    <!--end::Name-->
                                    <!--begin::FileAccessed-->
                                    @*<div class="fs-7 fw-bold text-gray-400 mt-auto">@file.FileAccessed</div>*@
                                    <!--end::FileAccessed-->
                                    <!--begin::FileSizeText-->
                                    <div class="fs-7 fw-bold text-gray-400 mt-auto">@file.FileSizeText</div>
                                    <!--end::FileSizeText-->
                                </div>
                                <!--end::Card body-->
                            </div>
                            <!--end::Card-->
                        </div>
                    }


                </div>
            </div>
        </div> <!--Proje Dosyaları-->
        <div class="card mt-5">
            <div class="card-body">
                <h2 class="fs-2 fw-bold my-2">Proje Durumu (@Model.Project.Status.GetDisplayName())</h2>
                <hr class="border-1" />
                <div class="row">
                    @if (Model.Project.Status != ProjectStatusEnum.Deleted)
                    {
                        <div class="col-6 col-sm-6 form-check form-switch form-check-custom form-check-solid">
                            <input class="form-check-input" type="checkbox" data-id="@Model.Project.Id" value="@newStatus" id="status" name="status" style="border: 1px solid #c1c1c1;">
                            <label class="form-check-label fw-bold text-gray-400 ms-3" for="status">@statusLabel</label>
                        </div>
                    }
                    @if (Model.Project.Status == ProjectStatusEnum.Planning)
                    {
                        <div class="col-6 col-sm-6 form-check form-switch form-check-custom form-check-solid">
                            <input class="form-check-input" type="checkbox" data-id="@Model.Project.Id" value="@ProjectStatusEnum.Deleted" id="delStatus" name="delStatus" style="border: 1px solid #c1c1c1;">
                            <label class="form-check-label fw-bold text-gray-400 ms-3" for="status">Sil</label>
                        </div>
                    }
                </div>
            </div>
        </div> <!--Proje Durumu-->
    </div> <!--Proje Dosyaları, Proje Durumu--->

</div>

<div class="d-flex flex-wrap flex-stack my-5 d-none">
    <!--begin::Heading-->
    <h2 class="fs-2 fw-bold my-2">
        Projects
        <span class="fs-6 text-gray-400 ms-1">by Status</span>
    </h2>
    <!--end::Heading-->
</div>

@section PageScripts {
    <script src="~/assets/js/custom/apps/project/change-status.js"></script>
}